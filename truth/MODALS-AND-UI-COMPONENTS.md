# üé® MODALS & UI COMPONENTS - COMPLETE REFERENCE
## ClientVia Agent Console - All Interactive Elements

**Date:** February 24, 2026  
**Version:** 1.0.0  
**Purpose:** Comprehensive documentation of all modals, forms, and UI components

---

## üìã TABLE OF CONTENTS

1. [Modals Inventory](#modals-inventory)
2. [Shared UI Components](#shared-ui-components)
3. [Forms & Inputs](#forms--inputs)
4. [Tables & Lists](#tables--lists)
5. [Navigation Elements](#navigation-elements)
6. [Status Indicators](#status-indicators)
7. [Toast Notifications](#toast-notifications)

---

## ü™ü MODALS INVENTORY

### **1. Greeting Rule Modal**

**Purpose:** Add or edit greeting interceptor rules  
**File:** `agent2.html` lines 450-528  
**JavaScript:** `agent2.js` lines 1079-1476  
**Trigger:** Click "Add Rule" button or edit icon on existing rule

#### **Fields:**

| Field | Type | Required | Max Length | Description |
|-------|------|----------|------------|-------------|
| Rule ID | Hidden | Auto | - | Generated: `greeting-rule-{timestamp}` |
| Priority | Number | Yes | 1-1000 | Lower = higher priority |
| Match Type | Dropdown | Yes | - | EXACT, FUZZY, CONTAINS, REGEX |
| Triggers | Textarea | Yes | - | Comma-separated phrases |
| Response | Textarea | Yes | 300 | Agent response text |
| Audio URL | Text (readonly) | No | - | Generated by ElevenLabs |

#### **HTML Structure:**
```html
<div class="modal-backdrop" id="modal-greeting-rule">
  <div class="modal">
    <div class="modal-header">
      <h2 class="modal-title">Add Greeting Rule</h2>
      <button class="btn btn-ghost btn-icon" id="btn-close-greeting-rule-modal">√ó</button>
    </div>
    <div class="modal-body">
      <input type="hidden" id="input-rule-id-edit">
      <div class="form-group">
        <label>Priority</label>
        <input type="number" id="input-rule-priority" value="50">
      </div>
      <div class="form-group">
        <label>Match Type</label>
        <select id="input-rule-match-type">
          <option value="EXACT">EXACT</option>
          <option value="FUZZY">FUZZY</option>
          <option value="CONTAINS">CONTAINS</option>
          <option value="REGEX">REGEX</option>
        </select>
      </div>
      <div class="form-group">
        <label>Triggers *</label>
        <input type="text" id="input-rule-triggers" placeholder="hi, hello, hey">
      </div>
      <div class="form-group">
        <label>Response *</label>
        <textarea id="input-rule-response" rows="3" maxlength="300"></textarea>
      </div>
      <div class="form-group">
        <label>Audio URL</label>
        <div style="display: flex; gap: 8px;">
          <input type="text" id="input-rule-audio" readonly>
          <button id="btn-play-rule-audio">Play</button>
          <button id="btn-generate-rule-audio">Generate</button>
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" id="btn-cancel-greeting-rule">Cancel</button>
      <button class="btn btn-primary" id="btn-save-greeting-rule">Save Rule</button>
    </div>
  </div>
</div>
```

#### **Actions:**

| Action | Handler | Endpoint | Description |
|--------|---------|----------|-------------|
| Save Rule | `saveGreetingRule()` | `POST /api/admin/agent2/{companyId}/greetings/rules` | Create new rule |
| Update Rule | `saveGreetingRule()` | `PATCH /api/admin/agent2/{companyId}/greetings/rules/{ruleId}` | Update existing |
| Generate Audio | `generateRuleAudio()` | `POST /api/admin/agent2/{companyId}/greetings/rules/{ruleId}/audio` | ElevenLabs TTS |
| Play Audio | `playRuleAudio()` | - | Browser Audio API |
| Cancel | `closeGreetingRuleModal()` | - | Close modal |

#### **Validation:**

```javascript
// Required fields
if (!triggers.trim()) {
  showToast('error', 'Triggers Required');
  return false;
}

if (!response.trim()) {
  showToast('error', 'Response Required');
  return false;
}

// Priority range
priority = Math.max(1, Math.min(1000, parseInt(priority)));

// Match type enum
if (!['EXACT', 'FUZZY', 'CONTAINS', 'REGEX'].includes(matchType)) {
  matchType = 'EXACT';
}
```

---

### **2. Trigger Edit Modal**

**Purpose:** Add or edit trigger cards  
**File:** `triggers.html` lines 1009-1215  
**JavaScript:** `triggers.js` lines 500+  
**Trigger:** Click "Add Trigger" button or edit icon on existing trigger

#### **Fields:**

| Field | Type | Required | Max Length | Description |
|-------|------|----------|------------|-------------|
| Label | Text | Yes | - | Display name |
| Rule ID | Text | Yes | - | Format: `category.topic` |
| Priority | Number | Yes | 1-1000 | Lower = higher priority |
| Keywords | Textarea | No | - | Comma-separated, all must appear |
| Phrases | Textarea | No | - | Comma-separated, exact phrase match |
| Negative Keywords | Textarea | No | - | Block trigger if matched |
| **Response Mode** | Toggle | - | - | Standard or LLM Fact Pack |
| Answer Text | Textarea | Conditional | - | Standard mode only |
| Audio URL | Text (readonly) | No | - | Standard mode only |
| LLM Included | Textarea | Conditional | 2500 | LLM mode only |
| LLM Excluded | Textarea | Conditional | 2500 | LLM mode only |
| LLM Backup | Textarea | Conditional | 500 | LLM mode - required |
| Follow-up | Textarea | No | - | Follow-up question |
| Create as Local | Checkbox | No | - | Local vs Global scope |

#### **Response Mode Toggle:**

```html
<div class="response-mode-toggle">
  <button class="mode-btn active" data-mode="standard">Standard</button>
  <button class="mode-btn" data-mode="llm">LLM Fact Pack</button>
</div>
```

**Standard Mode:**
- Shows: Answer Text, Audio URL, Generate/Play buttons
- Hides: LLM fields

**LLM Fact Pack Mode:**
- Shows: Included, Excluded, Backup fields
- Hides: Audio generation (always uses live TTS)

#### **Actions:**

| Action | Handler | Endpoint | Description |
|--------|---------|----------|-------------|
| Save Trigger | `saveTrigger()` | `POST /api/admin/agent2/company/{companyId}/triggers` | Create |
| Update Trigger | `saveTrigger()` | `PATCH /api/admin/agent2/company/{companyId}/triggers/{triggerId}` | Update |
| Generate Audio | `generateTriggerAudio()` | `POST /api/admin/agent2/{companyId}/generate-trigger-audio` | ElevenLabs |
| Play Audio | `playTriggerAudio()` | - | Browser Audio |
| GPT-4 Prefill | `gptPrefill()` | `POST /api/admin/agent2/{companyId}/gpt-prefill` | Auto-generate content |
| Cancel | `closeTriggerModal()` | - | Close modal |

---

### **3. GPT Settings Modal**

**Purpose:** Configure GPT-4 prefill behavior  
**File:** `triggers.html` lines 1247-1313  
**JavaScript:** `triggers.js` (GPT settings management)  
**Trigger:** Click GPT settings gear icon in trigger modal

#### **Fields:**

| Field | Type | Default | Options |
|-------|------|---------|---------|
| Business Type | Dropdown | 'hvac' | HVAC, Plumbing, Electrical, Dental, Medical, Legal, etc. |
| Default Priority | Number | 50 | 1-1000 |
| Tone | Dropdown | 'friendly' | Friendly, Professional, Casual, Empathetic |
| Additional Instructions | Textarea | - | Custom GPT instructions |
| Include Follow-up Questions | Checkbox | true | - |

#### **HTML Structure:**
```html
<div class="modal-backdrop" id="modal-gpt-settings">
  <div class="modal">
    <div class="modal-header">
      <h3>GPT-4 Prefill Settings</h3>
      <button id="modal-gpt-close">√ó</button>
    </div>
    <div class="modal-body">
      <div class="form-group">
        <label>Business Type</label>
        <select id="gpt-business-type">
          <option value="hvac">HVAC / Air Conditioning</option>
          <option value="dental">Dental Office</option>
          <!-- ... more options ... -->
        </select>
      </div>
      <div class="form-group">
        <label>Tone</label>
        <select id="gpt-tone">
          <option value="friendly">Friendly & Conversational</option>
          <option value="professional">Professional & Formal</option>
        </select>
      </div>
      <div class="form-group">
        <label>Additional Instructions</label>
        <textarea id="gpt-instructions" rows="3"></textarea>
      </div>
      <div class="form-group">
        <label>
          <input type="checkbox" id="gpt-include-followup" checked>
          Generate follow-up questions
        </label>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" id="btn-gpt-settings-cancel">Cancel</button>
      <button class="btn btn-primary" id="btn-gpt-settings-save">Save Settings</button>
    </div>
  </div>
</div>
```

---

### **4. Create Global Group Modal**

**Purpose:** Create new global trigger group  
**File:** `triggers.html` lines 1315-1374  
**JavaScript:** `triggers.js` (group management)  
**Trigger:** Click "New Group" button

#### **Warning Banner:**

```html
<div style="background: #fef3c7; border: 2px solid #f59e0b;">
  <span>‚ö†Ô∏è</span>
  <div>
    <strong>WARNING: This is NOT a trigger card!</strong>
    <p>You are creating a new Global Trigger Group - a container 
       that can hold multiple trigger cards.</p>
  </div>
</div>
```

#### **Fields:**

| Field | Type | Required | Validation |
|-------|------|----------|------------|
| Group ID | Text | Yes | Lowercase, alphanumeric + hyphens |
| Name | Text | Yes | - |
| Icon | Text | No | Emoji (default: üìã) |
| Description | Textarea | No | - |

---

### **5. Approval Modal**

**Purpose:** Confirm destructive actions  
**File:** `triggers.html` lines 1217-1244  
**JavaScript:** `triggers.js` (approval flow)  
**Trigger:** Delete trigger, disable global trigger, etc.

#### **HTML Structure:**
```html
<div class="modal-backdrop approval-modal" id="modal-approval">
  <div class="modal">
    <div class="modal-header">
      <h3>Admin Approval Required</h3>
      <button id="modal-approval-close">√ó</button>
    </div>
    <div class="modal-body">
      <div class="approval-warning">
        <div class="approval-icon">‚ö†Ô∏è</div>
        <div class="approval-title">Confirm Action</div>
        <div class="approval-text">This action requires admin approval.</div>
        <div class="form-group">
          <label>Type "approved" to confirm:</label>
          <input type="text" id="input-approval" placeholder="approved">
        </div>
      </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-secondary" id="btn-approval-cancel">Cancel</button>
      <button class="btn btn-danger" id="btn-approval-confirm">Confirm</button>
    </div>
  </div>
</div>
```

#### **Validation:**
```javascript
if (inputApproval.value.toLowerCase() !== 'approved') {
  showToast('error', 'Type "approved" to confirm');
  return;
}
```

---

## üß© SHARED UI COMPONENTS

### **Toggle Switch**

**File:** `triggers.html` lines 388-466 (CSS)  
**Usage:** Enable/disable greetings, rules, triggers

#### **HTML:**
```html
<label class="toggle-switch">
  <input type="checkbox" id="toggle-enabled">
  <span class="toggle-slider"></span>
</label>
```

#### **CSS:**
```css
.toggle-switch {
  position: relative;
  width: 52px;
  height: 26px;
}

.toggle-slider {
  background-color: #d1d5db; /* OFF state */
  border-radius: 24px;
}

.toggle-slider:after {
  content: "OFF";
  color: #6b7280;
}

input:checked + .toggle-slider {
  background-color: #3b82f6; /* ON state */
}

input:checked + .toggle-slider:after {
  content: "ON";
  color: #ffffff;
}
```

#### **States:**
- **OFF:** Gray background, "OFF" label
- **ON:** Blue background, "ON" label

---

### **Stat Boxes**

**File:** `agent2.html` lines 102-132  
**Purpose:** Display metrics (trigger count, clarifiers, vocabulary)

#### **HTML:**
```html
<div class="stat-box clickable" id="stat-box-triggers">
  <div class="stat-box-label">Trigger Cards</div>
  <div class="stat-box-value" id="stat-trigger-cards">‚Äî</div>
</div>
```

#### **CSS:**
```css
.stat-box {
  padding: 16px 20px;
  background: #f9fafb;
  border: 1px solid #e5e7eb;
  border-radius: 8px;
}

.stat-box-label {
  font-size: 0.75rem;
  color: #6b7280;
  text-transform: uppercase;
}

.stat-box-value {
  font-size: 2rem;
  font-weight: 700;
  color: #111827;
}

.stat-box.clickable {
  cursor: pointer;
  transition: background 0.2s;
}

.stat-box.clickable:hover {
  background: #f3f4f6;
}
```

---

### **Health Status Bar**

**File:** `agent2.html` lines 94-100  
**Purpose:** Minimal issues-only display

#### **HTML:**
```html
<div id="health-summary">
  <span id="health-summary-icon">‚úÖ</span>
  <span id="health-summary-text">All systems operational</span>
  <button id="btn-refresh-health">Refresh</button>
</div>
```

#### **States:**

**All Good:**
```css
background: #f0fdf4;
border-color: #bbf7d0;
icon: ‚úÖ
text: "All systems operational" (green)
```

**Issues Detected:**
```css
background: #fef2f2;
border-color: #fecaca;
icon: ‚ö†Ô∏è
text: "Twilio not configured ‚Ä¢ No voice configured" (red)
```

---

### **Audio Generation Controls**

**Components:**
- Text input (readonly URL display)
- Play button (toggle play/pause)
- Generate button (calls ElevenLabs)
- Status hint

#### **HTML:**
```html
<div style="display: flex; gap: 8px;">
  <input type="text" class="form-input" id="input-audio" readonly>
  <button class="btn btn-secondary" id="btn-play-audio">
    <svg>‚ñ∂</svg> Play
  </button>
  <button class="btn" id="btn-generate-audio" style="background: #16a34a;">
    <svg>‚úì</svg> Generate
  </button>
</div>
<p class="form-hint" id="audio-status">Optional. If provided, plays audio instead of TTS.</p>
```

#### **States:**

**No Audio:**
```
Button: "Generate"
Hint: "Optional. If provided, plays audio instead of TTS."
Play button: hidden
```

**Audio Ready:**
```
Button: "Regenerate"
Hint: "‚úÖ Audio ready"
Play button: visible
```

**Audio Stale (text changed):**
```
Button: "Generate"
Hint: "‚ö†Ô∏è Text changed ‚Äî please regenerate audio"
Play button: visible (but shows warning on play)
```

---

### **Response Mode Toggle**

**File:** `triggers.html` lines 256-297 (CSS)  
**Purpose:** Switch between Standard and LLM Fact Pack modes

#### **HTML:**
```html
<div class="response-mode-toggle">
  <button class="mode-btn active" data-mode="standard">Standard</button>
  <button class="mode-btn" data-mode="llm">LLM Fact Pack</button>
</div>
```

#### **CSS:**
```css
.response-mode-toggle {
  display: flex;
  gap: 0;
  background: #333;
  border-radius: 6px;
  padding: 4px;
}

.mode-btn {
  padding: 8px 16px;
  background: transparent;
  color: #9ca3af;
  border: none;
  cursor: pointer;
}

.mode-btn.active {
  background: #3b82f6;
  color: white;
}

.mode-btn.active[data-mode="llm"] {
  background: #8b5cf6; /* Purple for LLM mode */
}
```

---

## üìä TABLES & LISTS

### **Greeting Rules Table**

**File:** `agent2.html` lines 258-286  
**Rendering:** `agent2.js` lines 814-905

#### **Columns:**

| Column | Width | Content |
|--------|-------|---------|
| On/Off | 50px | Toggle switch |
| Priority | 60px | Number badge |
| Match | 80px | Badge (EXACT, FUZZY, CONTAINS, REGEX) |
| Triggers | 1fr | Comma-separated list |
| Response | 1fr | Response text preview |
| Audio | 100px | ‚úì Audio or ‚Äî |
| Actions | 80px | Edit, Delete icons |

#### **HTML:**
```html
<div class="trigger-table-header">
  <div>On</div>
  <div>Priority</div>
  <div>Match</div>
  <div>Triggers</div>
  <div>Response</div>
  <div>Audio</div>
  <div>Actions</div>
</div>

<div id="greeting-rules-list">
  <!-- Rows rendered here -->
</div>
```

#### **Row Structure:**
```html
<div class="greeting-rule-row">
  <div>
    <label class="toggle-switch">
      <input type="checkbox" class="toggle-rule-enabled" checked>
      <span class="toggle-slider"></span>
    </label>
  </div>
  <div class="rule-priority">50</div>
  <div>
    <span class="match-badge fuzzy">FUZZY</span>
  </div>
  <div class="rule-triggers">hi, hello, hey</div>
  <div class="rule-response">Hi! How can I help you today?</div>
  <div class="rule-audio">‚úì Audio</div>
  <div class="rule-actions">
    <button class="btn-edit-rule">‚úèÔ∏è</button>
    <button class="btn-delete-rule">üóëÔ∏è</button>
  </div>
</div>
```

---

### **Trigger Cards Table**

**File:** `triggers.html` lines 966-988  
**Rendering:** `triggers.js` lines 427-463

#### **Columns:**

| Column | Width | Content |
|--------|-------|---------|
| Pri | 50px | Priority badge (color-coded) |
| Label | 1fr | Trigger label |
| Keywords | 1fr | Keywords preview |
| Answer | 100px | Text/Audio/LLM badge |
| Follow-up | 120px | Follow-up preview |
| Scope | 80px | GLOBAL/LOCAL badge |
| On/Off | 70px | Toggle switch |
| Actions | 80px | Edit, Delete icons |

#### **Priority Badge Colors:**
```css
.trigger-priority.p1 { background: #dc2626; } /* Red - Highest */
.trigger-priority.p2 { background: #f59e0b; } /* Orange - High */
.trigger-priority.p3 { background: #6b7280; } /* Gray - Normal */
```

#### **Answer Format Badges:**
```css
.answer-badge.text { background: #16a34a; color: #fff; } /* Green */
.answer-badge.audio { background: #3b82f6; color: #fff; } /* Blue */
.answer-badge.llm { background: #8b5cf6; color: #fff; } /* Purple */
.answer-badge.stale { background: #fef2f2; color: #dc2626; border: 1px solid #fca5a5; } /* Red */
```

#### **Scope Badges:**
```css
.scope-badge.global { background: #1d4ed8; color: #fff; } /* Blue */
.scope-badge.local { background: #16a34a; color: #fff; } /* Green */
.scope-badge.override { background: #ea580c; color: #fff; } /* Orange */
```

---

### **Company Variables Table**

**File:** `triggers.html` lines 906-936  
**Purpose:** Auto-detect {variables} in triggers

#### **Columns:**

| Column | Content |
|--------|---------|
| Variable | {variableName} |
| Value | Current value or "‚Äî" |
| Status | ‚úì (has value) or ‚ùå (missing) |

#### **HTML:**
```html
<table>
  <thead>
    <tr>
      <th>Variable</th>
      <th>Value</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody id="variables-table-body">
    <tr>
      <td>{companyName}</td>
      <td>Penguin Air</td>
      <td style="color: #16a34a;">‚úì</td>
    </tr>
    <tr>
      <td>{serviceArea}</td>
      <td>‚Äî</td>
      <td style="color: #dc2626;">‚ùå</td>
    </tr>
  </tbody>
</table>
```

---

## üéØ TOAST NOTIFICATIONS

**File:** `agent2.js` lines 315-373 (shared across all pages)  
**Container:** `<div class="toast-container" id="toast-container"></div>`

### **Toast Types:**

#### **Success:**
```javascript
showToast('success', 'Saved', 'Greeting rule updated successfully.');
```
**Appearance:**
- Icon: ‚úì (green circle)
- Border: Green
- Auto-dismiss: 5 seconds

#### **Error:**
```javascript
showToast('error', 'Save Failed', 'Could not save greeting rule.');
```
**Appearance:**
- Icon: ‚úó (red circle)
- Border: Red
- Auto-dismiss: 5 seconds

#### **Warning:**
```javascript
showToast('warning', 'Audio Stale', 'Text changed ‚Äî please regenerate audio.');
```
**Appearance:**
- Icon: ‚ö† (orange triangle)
- Border: Orange
- Auto-dismiss: 5 seconds

#### **Info:**
```javascript
showToast('info', 'Loading', 'Fetching trigger data...');
```
**Appearance:**
- Icon: ‚Ñπ (blue circle)
- Border: Blue
- Auto-dismiss: 5 seconds

### **HTML Structure:**
```html
<div class="toast toast-success">
  <div class="toast-icon">
    <svg>‚úì</svg>
  </div>
  <div class="toast-content">
    <div class="toast-title">Saved</div>
    <div class="toast-message">Greeting rule updated successfully.</div>
  </div>
  <button class="toast-close">√ó</button>
</div>
```

---

## üß≠ NAVIGATION ELEMENTS

### **Breadcrumb Navigation**

**File:** `agent2.html` lines 63-70

```html
<a href="#" class="back-button" id="btn-back">
  <svg>‚Üê</svg>
  Back to Agent Console
</a>
```

### **Header Navigation**

**Components:**
- Back button (icon only)
- Logo + company name
- Company ID pill
- Primary action buttons

**Example:**
```html
<header class="header">
  <div class="header-left">
    <button class="btn btn-ghost btn-icon" id="btn-back-to-profile">
      <svg>‚Üê</svg>
    </button>
    <a href="#" class="header-logo">
      <svg>üì¶</svg>
      <span>ClientVia</span>
    </a>
    <div class="header-divider"></div>
    <span class="header-title">Agent 2.0 ‚Äî Discovery</span>
  </div>
  
  <div class="header-center">
    <span class="company-name">Penguin Air</span>
    <span class="company-id-pill">68e3f7...00c4</span>
  </div>
  
  <div class="header-right">
    <button class="btn btn-primary" id="btn-download-truth">
      Download Truth JSON
    </button>
  </div>
</header>
```

---

## üé® FORM INPUTS

### **Text Input**
```html
<input type="text" class="form-input" placeholder="Enter text...">
```

### **Textarea**
```html
<textarea class="form-textarea" rows="3" maxlength="300" placeholder="Enter text..."></textarea>
```

### **Dropdown**
```html
<select class="form-select">
  <option value="option1">Option 1</option>
  <option value="option2">Option 2</option>
</select>
```

### **Checkbox**
```html
<label class="form-label checkbox-label">
  <input type="checkbox" id="checkbox-id">
  Enable feature
</label>
```

### **Number Input**
```html
<input type="number" class="form-input" min="1" max="1000" value="50">
```

---

## üìä STATUS INDICATORS

### **Badge Components**

#### **Priority Badge:**
```html
<span class="trigger-priority p1">10</span>
<span class="trigger-priority p2">50</span>
<span class="trigger-priority p3">100</span>
```

#### **Match Type Badge:**
```html
<span class="match-badge exact">EXACT</span>
<span class="match-badge fuzzy">FUZZY</span>
<span class="match-badge contains">CONTAINS</span>
<span class="match-badge regex">REGEX</span>
```

#### **Scope Badge:**
```html
<span class="scope-badge global">GLOBAL</span>
<span class="scope-badge local">LOCAL</span>
<span class="scope-badge override">OVERRIDE</span>
```

#### **Answer Format Badge:**
```html
<span class="answer-badge text">TEXT</span>
<span class="answer-badge audio">AUDIO</span>
<span class="answer-badge llm">LLM</span>
<span class="answer-badge stale">STALE</span>
```

---

## üîç SEARCH & FILTER

### **Search Input**

**File:** `triggers.html` line 961

```html
<input type="text" class="form-input" id="trigger-search" placeholder="Search triggers...">
```

**JavaScript:**
```javascript
DOM.triggerSearch.addEventListener('input', (e) => {
  state.searchQuery = e.target.value.toLowerCase();
  renderTriggers();
});
```

### **Scope Filter Buttons**

**File:** `triggers.html` lines 950-960

```html
<div class="flex gap-4">
  <button class="scope-filter-btn active" data-scope="all" id="filter-all">All</button>
  <button class="scope-filter-btn" data-scope="global" id="filter-global">Global</button>
  <button class="scope-filter-btn" data-scope="local" id="filter-local">Local</button>
</div>
```

---

**END OF UI COMPONENTS REFERENCE**

*This document provides complete documentation of all interactive UI elements in the Agent Console for enterprise-level development and maintenance.*
