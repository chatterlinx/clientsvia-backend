<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Personality Tab Test</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* Copy the exact CSS from the main file */
        .clientsvia-tab-content {
            position: relative;
            overflow: visible;
            width: 100%;
            min-height: 200px;
        }
        
        .clientsvia-tab-content {
            position: relative !important;
            float: none !important;
            clear: both;
            width: 100%;
            box-sizing: border-box;
        }
        
        .clientsvia-tab-content:not(.active) {
            display: none !important;
            visibility: hidden !important;
            opacity: 0 !important;
            height: 0 !important;
            overflow: hidden !important;
        }
        
        .clientsvia-tab-content.active {
            display: block !important;
            visibility: visible !important;
            opacity: 1 !important;
            height: auto !important;
            overflow: visible !important;
        }
        
        .clientsvia-tab-btn {
            transition: all 0.2s ease;
        }
        
        .clientsvia-tab-btn.active {
            border-color: #6366f1 !important;
            color: #6366f1 !important;
            background-color: #eef2ff !important;
        }
        
        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.25rem;
        }
        
        .form-select, .form-checkbox {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            font-size: 0.875rem;
        }
        
        .form-checkbox {
            width: auto;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto p-6">
        <h1 class="text-2xl font-bold mb-6">Agent Personality Tab Test</h1>
        
        <!-- Tab Navigation -->
        <div class="border-b border-gray-200 mb-6">
            <div class="flex space-x-0">
                <button id="test-tab-1" class="clientsvia-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                    <i class="fas fa-book-open mr-2"></i>Test Tab 1
                </button>
                <button id="test-tab-personality" class="clientsvia-tab-btn active px-4 py-3 text-sm font-medium border-b-2 border-indigo-500 text-indigo-600 bg-indigo-50">
                    <i class="fas fa-theater-masks mr-2"></i>Agent Personality
                </button>
                <button id="test-tab-3" class="clientsvia-tab-btn px-4 py-3 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700">
                    <i class="fas fa-chart-line mr-2"></i>Test Tab 3
                </button>
            </div>
        </div>
        
        <!-- Tab Content -->
        <div id="tab-container">
            <!-- Test Tab 1 -->
            <div id="test-content-1" class="clientsvia-tab-content">
                <h3 class="text-lg font-semibold mb-4">Test Tab 1 Content</h3>
                <p>This is test content for tab 1.</p>
            </div>
            
            <!-- Agent Personality Tab - EXACT COPY -->
            <div id="test-personality-content" class="clientsvia-tab-content active">
                <div class="mb-6">
                    <h4 class="text-lg font-semibold text-gray-800 flex items-center mb-4">
                        <i class="fas fa-theater-masks mr-2 text-pink-600"></i>Agent Personality Configuration
                        <span class="ml-2 text-sm text-gray-600">(Voice tone, pace & behavior)</span>
                    </h4>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Left Column: Voice Settings -->
                        <div class="space-y-4">
                            <h5 class="text-md font-semibold text-gray-700 border-b pb-2">
                                <i class="fas fa-microphone mr-2 text-pink-600"></i>Voice Configuration
                            </h5>
                            
                            <!-- Voice Tone -->
                            <div>
                                <label for="test-voiceToneSelect" class="form-label">Voice Tone</label>
                                <select id="test-voiceToneSelect" class="form-select">
                                    <option value="friendly">Friendly - Warm and approachable</option>
                                    <option value="professional">Professional - Business-focused</option>
                                    <option value="playful">Playful - Light and engaging</option>
                                </select>
                                <p class="text-xs text-gray-500 mt-1">Controls word choice and phrasing style</p>
                            </div>

                            <!-- Speech Pace -->
                            <div>
                                <label for="test-speechPaceSelect" class="form-label">Speech Pace</label>
                                <select id="test-speechPaceSelect" class="form-select">
                                    <option value="slow">Slow - Deliberate and clear</option>
                                    <option value="normal">Normal - Standard pace</option>
                                    <option value="fast">Fast - Quick and efficient</option>
                                </select>
                                <p class="text-xs text-gray-500 mt-1">Adjusts TTS speed for ElevenLabs or Google</p>
                            </div>
                        </div>

                        <!-- Right Column: Behavior Settings -->
                        <div class="space-y-4">
                            <h5 class="text-md font-semibold text-gray-700 border-b pb-2">
                                <i class="fas fa-user-cog mr-2 text-rose-600"></i>Behavior Controls
                            </h5>
                            
                            <!-- Interactive Behaviors -->
                            <div class="space-y-3">
                                <label class="flex items-center p-3 bg-blue-50 rounded-lg border border-blue-200">
                                    <input type="checkbox" id="test-bargeInToggle" class="form-checkbox mr-3">
                                    <div>
                                        <span class="font-medium text-gray-800">Allow Barge-In</span>
                                        <p class="text-xs text-gray-600">Let callers interrupt the agent</p>
                                    </div>
                                </label>
                                
                                <label class="flex items-center p-3 bg-green-50 rounded-lg border border-green-200">
                                    <input type="checkbox" id="test-emotionToggle" class="form-checkbox mr-3">
                                    <div>
                                        <span class="font-medium text-gray-800">Acknowledge Emotion</span>
                                        <p class="text-xs text-gray-600">Respond to caller's emotional state</p>
                                    </div>
                                </label>
                                
                                <label class="flex items-center p-3 bg-purple-50 rounded-lg border border-purple-200">
                                    <input type="checkbox" id="test-emojiToggle" class="form-checkbox mr-3">
                                    <div>
                                        <span class="font-medium text-gray-800">Use Emojis</span>
                                        <p class="text-xs text-gray-600">Include emojis in responses</p>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Call Transfer Configuration -->
                    <div class="mt-8 p-6 bg-gray-50 rounded-lg border">
                        <h5 class="text-md font-semibold text-gray-700 mb-4">
                            <i class="fas fa-phone-alt mr-2 text-blue-600"></i>Call Transfer Configuration
                        </h5>
                        
                        <div class="space-y-4">
                            <label class="flex items-center">
                                <input type="checkbox" id="test-dialOutEnabled" class="form-checkbox mr-3">
                                <span class="font-medium text-gray-800">Enable Call Transfer</span>
                            </label>
                            
                            <div id="test-transferConfig" class="space-y-4">
                                <div>
                                    <label for="test-dialOutNumber" class="form-label">Transfer Phone Number</label>
                                    <input type="tel" id="test-dialOutNumber" class="form-select" placeholder="+1234567890">
                                </div>
                                
                                <div>
                                    <label for="test-transferMessage" class="form-label">Transfer Message</label>
                                    <textarea id="test-transferMessage" class="form-select" rows="3" placeholder="Please hold while I transfer you to our technician..."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Save Button -->
                    <div class="mt-6 flex justify-end">
                        <button id="test-savePersonality" class="px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                            <i class="fas fa-save mr-2"></i>Save Personality Settings
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Test Tab 3 -->
            <div id="test-content-3" class="clientsvia-tab-content">
                <h3 class="text-lg font-semibold mb-4">Test Tab 3 Content</h3>
                <p>This is test content for tab 3.</p>
            </div>
        </div>
        
        <!-- Debug Information -->
        <div class="mt-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
            <h3 class="font-semibold mb-2">Debug Information:</h3>
            <div id="debug-info" class="text-sm text-gray-700 space-y-1">
                <div>Loading debug info...</div>
            </div>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(targetTabId) {
            console.log('🔀 Switching to tab:', targetTabId);
            
            // Get all tab buttons and contents
            const tabButtons = document.querySelectorAll('.clientsvia-tab-btn');
            const tabContents = document.querySelectorAll('.clientsvia-tab-content');
            
            // Remove active class from all buttons and contents
            tabButtons.forEach(btn => {
                btn.classList.remove('active', 'border-indigo-500', 'text-indigo-600', 'bg-indigo-50');
                btn.classList.add('border-transparent', 'text-gray-500');
            });
            
            tabContents.forEach(content => {
                content.classList.remove('active');
            });
            
            // Activate target tab and content
            const targetButton = document.getElementById(`test-tab-${targetTabId}`);
            const targetContent = document.getElementById(`test-${targetTabId}-content`);
            
            if (targetButton) {
                targetButton.classList.add('active', 'border-indigo-500', 'text-indigo-600', 'bg-indigo-50');
                targetButton.classList.remove('border-transparent', 'text-gray-500');
            }
            
            if (targetContent) {
                targetContent.classList.add('active');
                
                // Debug information
                const debugInfo = document.getElementById('debug-info');
                debugInfo.innerHTML = `
                    <div><strong>Target Tab:</strong> ${targetTabId}</div>
                    <div><strong>Content Element:</strong> ${targetContent ? 'Found' : 'Not Found'}</div>
                    <div><strong>Classes:</strong> ${targetContent?.className}</div>
                    <div><strong>Display:</strong> ${targetContent ? getComputedStyle(targetContent).display : 'N/A'}</div>
                    <div><strong>Visibility:</strong> ${targetContent ? getComputedStyle(targetContent).visibility : 'N/A'}</div>
                    <div><strong>Height:</strong> ${targetContent ? getComputedStyle(targetContent).height : 'N/A'}</div>
                    <div><strong>Offset Height:</strong> ${targetContent?.offsetHeight || 0}px</div>
                    <div><strong>Scroll Height:</strong> ${targetContent?.scrollHeight || 0}px</div>
                    <div><strong>Children Count:</strong> ${targetContent?.children.length || 0}</div>
                    <div><strong>innerHTML Length:</strong> ${targetContent?.innerHTML?.length || 0}</div>
                    <div><strong>Is Visible:</strong> ${targetContent?.offsetHeight > 0 ? 'YES' : 'NO'}</div>
                `;
                
                console.log('🔍 Debug Info for', targetTabId, {
                    element: targetContent,
                    classes: targetContent?.className,
                    display: targetContent ? getComputedStyle(targetContent).display : 'N/A',
                    visibility: targetContent ? getComputedStyle(targetContent).visibility : 'N/A',
                    height: targetContent ? getComputedStyle(targetContent).height : 'N/A',
                    offsetHeight: targetContent?.offsetHeight,
                    scrollHeight: targetContent?.scrollHeight,
                    childrenCount: targetContent?.children.length,
                    isVisible: targetContent?.offsetHeight > 0
                });
            }
        }
        
        // Add click listeners
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('test-tab-1')?.addEventListener('click', () => switchTab('1'));
            document.getElementById('test-tab-personality')?.addEventListener('click', () => switchTab('personality'));
            document.getElementById('test-tab-3')?.addEventListener('click', () => switchTab('3'));
            
            // Initialize with personality tab active
            switchTab('personality');
            
            // Test save button
            document.getElementById('test-savePersonality')?.addEventListener('click', function() {
                alert('Save button works! This confirms the content is interactive.');
            });
        });
    </script>
</body>
</html>
